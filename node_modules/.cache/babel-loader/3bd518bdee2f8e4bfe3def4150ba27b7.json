{"ast":null,"code":"var _jsxFileName = \"/Users/blakehatch/WebstormProjects/1st-edition-mint/src/App.js\",\n    _s = $RefreshSig$();\n\nimport { BrowserRouter as Router, Switch, Route, Redirect, useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from \"react\"; //import axios from \"axios\";\n\nimport \"./styles/app.sass\";\nimport Page from \"./components/Page\";\nimport Faq from \"./screens/Faq\";\nimport Mint from \"./screens/Mint\";\nimport Open from \"./screens/Open\";\nimport Verify from \"./screens/Verify\";\nimport Web3 from \"web3\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { Breakpoint, BreakpointProvider } from 'react-socks';\nimport { useWeb3React } from '@web3-react/core';\nimport { Biconomy } from \"@biconomy/mexa\";\nimport { WalletLinkConnector } from \"@web3-react/walletlink-connector\";\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\";\nimport { InjectedConnector } from \"@web3-react/injected-connector\";\nimport { NetworkConnector } from \"@web3-react/network-connector\";\nimport CoinbaseWalletSDK from \"@coinbase/wallet-sdk\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Web3Modal from \"web3modal\";\nimport { toHex, truncateAddress } from \"./utils/utils\";\nimport { ethers } from \"ethers\";\nimport config from \"./local-dev-config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst providerOptions = {\n  coinbasewallet: {\n    package: CoinbaseWalletSDK,\n    // Required\n    options: {\n      appName: \"Viridian Exchange\",\n      // Required\n      rpc: \"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\",\n      // Optional if `infuraId` is provided; otherwise it's required\n      chainId: 137,\n      // Optional. It defaults to 1 if not provided\n      darkMode: true // Optional. Use dark theme, defaults to false\n\n    }\n  },\n  walletconnect: {\n    package: WalletConnectProvider,\n    // required\n    options: {\n      rpc: {\n        137: \"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\"\n      }\n    }\n  }\n};\nconst networkParams = {\n  \"0x0100\": {\n    chainId: '0x13881',\n    rpcUrls: [\"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\"],\n    chainName: \"Polygon Mainnet\",\n    nativeCurrency: {\n      name: \"Ether\",\n      decimals: 18,\n      symbol: \"ETH\"\n    },\n    blockExplorerUrls: [\"https://explorer.harmony.one\"],\n    iconUrls: [\"https://harmonynews.one/wp-content/uploads/2019/11/slfdjs.png\"]\n  }\n};\nconst web3Modal = new Web3Modal({\n  network: \"mainnet\",\n  // optional\n  cacheProvider: true,\n  // optional\n  providerOptions,\n  // required,\n  theme: \"dark\"\n}); //TODO: show address, list of followers, description, etc on profile page\n// function in the smart contract to add a user that is followed\n// (triggered by follow button press-> calls the function which takes in an address and adds the user to the list of following)\n// front end will pull the followee user and be able to show the profile on the initial user\n// , and call in the CLI, once followers working, you will see another profile show up\n// use item flow -> Profile/user flow\n// get current user wallet, then abi->getuserfromaddress->return json of user struct\n\nfunction App() {\n  _s();\n\n  const [biconomyFetched, setBiconomyFetched] = useState(false);\n  const [account, setAccount] = useState();\n  const [provider, setProvider] = useState();\n  const [library, setLibrary] = useState();\n  const [biconomyLib, setBiconomy] = useState();\n  const [signature, setSignature] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [chainId, setChainId] = useState();\n  const [network, setNetwork] = useState();\n  const [message, setMessage] = useState(\"\");\n  const [signedMessage, setSignedMessage] = useState(\"\");\n  const [verified, setVerified] = useState();\n  const [gaslessReady, setGaslessReady] = useState(false);\n\n  const connectWallet = async () => {\n    //try {\n    const provider = await web3Modal.connect();\n    let library = new Web3(provider);\n    let biconomy = new Biconomy(provider, {\n      apiKey: \"TVCsgQVfk.a6031565-1cb6-40da-8a60-2ffec22e3bed\",\n      debug: true\n    });\n    biconomy.onEvent(biconomy.READY, () => {\n      // Initialize your dapp here like getting user accounts etc\n      //alert(\"initialized\");\n      setGaslessReady(true);\n      setBiconomy(biconomy);\n    }).onEvent(biconomy.ERROR, (error, message) => {\n      // Handle error while initializing mexa\n      alert(\"BICO ERR: \" + JSON.stringify(error));\n    });\n    setLibrary(library); //alert(JSON.stringify(library.givenProvider));\n\n    const accounts = await library.eth.getAccounts(); //alert(JSON.stringify(accounts));\n\n    const network = await library.eth.net.getId(); //alert(JSON.stringify(network));\n\n    setProvider(provider);\n    setLibrary(library);\n    if (accounts) setAccount(accounts[0]);\n    setChainId(network); // } catch (error) {\n    //     alert(JSON.stringify(error));\n    // }\n  };\n\n  const handleNetwork = e => {\n    const id = e.target.value;\n    setNetwork(Number(id));\n  };\n\n  const handleInput = e => {\n    const msg = e.target.value;\n    setMessage(msg);\n  };\n\n  const switchNetwork = async toETH => {\n    if (toETH) {\n      try {\n        await window.ethereum.request({\n          method: \"wallet_switchEthereumChain\",\n          params: [{\n            chainId: toHex(1)\n          }]\n        });\n      } catch (switchError) {\n        setError(error);\n      }\n    } else {\n      try {\n        await window.ethereum.request({\n          method: \"wallet_switchEthereumChain\",\n          params: [{\n            chainId: toHex(4)\n          }]\n        });\n      } catch (switchError) {\n        //alert(JSON.stringify(switchError.code))\n        if (switchError.code === 4902) {\n          try {\n            await window.ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [{\n                chainName: 'Polygon Mainnet',\n                chainId: toHex(4),\n                nativeCurrency: {\n                  name: 'Polygon',\n                  symbol: 'MATIC',\n                  decimals: 18\n                },\n                rpcUrls: ['https://rpc-mainnet.maticvigil.com/'],\n                blockExplorerUrls: ['https://polygonscan.com/']\n              }]\n            });\n          } catch (error) {\n            setError(error);\n          }\n        }\n      }\n    }\n  };\n\n  const refreshState = () => {\n    setAccount();\n    setChainId();\n    setNetwork(\"\");\n    setMessage(\"\");\n    setSignature(\"\");\n    setVerified(undefined);\n  };\n\n  const disconnect = async () => {\n    await web3Modal.clearCachedProvider();\n    refreshState();\n  };\n\n  useEffect(async () => {\n    if (web3Modal.cachedProvider) {\n      await connectWallet();\n    }\n  }, []);\n  useEffect(async () => {\n    //alert(chainId);\n    if (toHex(chainId) !== toHex(4)) {\n      await switchNetwork(false);\n    }\n  }, [chainId]);\n  useEffect(() => {\n    if (provider === null || provider === void 0 ? void 0 : provider.on) {\n      const handleAccountsChanged = accounts => {\n        console.log(\"accountsChanged\", accounts);\n        if (accounts) setAccount(accounts[0]);\n      };\n\n      const handleChainChanged = _hexChainId => {\n        setChainId(_hexChainId);\n      };\n\n      const handleDisconnect = () => {\n        console.log(\"disconnect\", error);\n        disconnect();\n      };\n\n      provider.on(\"accountsChanged\", handleAccountsChanged);\n      provider.on(\"chainChanged\", handleChainChanged);\n      provider.on(\"disconnect\", handleDisconnect);\n      return () => {\n        if (provider.removeListener) {\n          provider.removeListener(\"accountsChanged\", handleAccountsChanged);\n          provider.removeListener(\"chainChanged\", handleChainChanged);\n          provider.removeListener(\"disconnect\", handleDisconnect);\n        }\n      };\n    }\n  }, [provider]);\n  return /*#__PURE__*/_jsxDEV(BreakpointProvider, {\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      forceRefresh: true,\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/mint\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/mint\",\n          render: () => /*#__PURE__*/_jsxDEV(Page, {\n            library: library,\n            chainId: chainId,\n            biconomyFetched: biconomyFetched,\n            account: account,\n            setAccount: setAccount,\n            connectWallet: connectWallet,\n            disconnect: disconnect,\n            children: /*#__PURE__*/_jsxDEV(Mint, {\n              setGaslessReady: setGaslessReady,\n              library: library,\n              biconomyFetched: biconomyFetched,\n              account: account,\n              setAccount: setAccount,\n              gaslessReady: gaslessReady,\n              connectWallet: connectWallet\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/open\",\n          render: () => /*#__PURE__*/_jsxDEV(Page, {\n            library: library,\n            chainId: chainId,\n            biconomyFetched: biconomyFetched,\n            account: account,\n            setAccount: setAccount,\n            connectWallet: connectWallet,\n            disconnect: disconnect,\n            children: /*#__PURE__*/_jsxDEV(Open, {\n              setGaslessReady: setGaslessReady,\n              gaslessReady: gaslessReady,\n              F: true,\n              biconomyFetched: biconomyFetched,\n              account: account,\n              setAccount: setAccount\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/verify\",\n          render: () => /*#__PURE__*/_jsxDEV(Page, {\n            library: library,\n            chainId: chainId,\n            children: /*#__PURE__*/_jsxDEV(Verify, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 27\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"*\",\n          children: /*#__PURE__*/_jsxDEV(Redirect, {\n            to: \"/mint\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"MBXPpESOxK1neslsCBN8kwo1ICY=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/blakehatch/WebstormProjects/1st-edition-mint/src/App.js"],"names":["BrowserRouter","Router","Switch","Route","Redirect","useHistory","React","useState","useEffect","Page","Faq","Mint","Open","Verify","Web3","Web3Provider","Breakpoint","BreakpointProvider","useWeb3React","Biconomy","WalletLinkConnector","WalletConnectConnector","InjectedConnector","NetworkConnector","CoinbaseWalletSDK","WalletConnectProvider","Web3Modal","toHex","truncateAddress","ethers","config","providerOptions","coinbasewallet","package","options","appName","rpc","chainId","darkMode","walletconnect","networkParams","rpcUrls","chainName","nativeCurrency","name","decimals","symbol","blockExplorerUrls","iconUrls","web3Modal","network","cacheProvider","theme","App","biconomyFetched","setBiconomyFetched","account","setAccount","provider","setProvider","library","setLibrary","biconomyLib","setBiconomy","signature","setSignature","error","setError","setChainId","setNetwork","message","setMessage","signedMessage","setSignedMessage","verified","setVerified","gaslessReady","setGaslessReady","connectWallet","connect","biconomy","apiKey","debug","onEvent","READY","ERROR","alert","JSON","stringify","accounts","eth","getAccounts","net","getId","handleNetwork","e","id","target","value","Number","handleInput","msg","switchNetwork","toETH","window","ethereum","request","method","params","switchError","code","refreshState","undefined","disconnect","clearCachedProvider","cachedProvider","on","handleAccountsChanged","console","log","handleChainChanged","_hexChainId","handleDisconnect","removeListener"],"mappings":"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","sourcesContent":["import { BrowserRouter as Router, Switch, Route, Redirect, useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from \"react\";\n//import axios from \"axios\";\nimport \"./styles/app.sass\";\nimport Page from \"./components/Page\";\nimport Faq from \"./screens/Faq\";\nimport Mint from \"./screens/Mint\";\nimport Open from \"./screens/Open\";\nimport Verify from \"./screens/Verify\";\nimport Web3 from \"web3\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport { Breakpoint, BreakpointProvider } from 'react-socks';\nimport { useWeb3React } from '@web3-react/core'\nimport {Biconomy} from \"@biconomy/mexa\";\nimport {WalletLinkConnector} from \"@web3-react/walletlink-connector\";\nimport {WalletConnectConnector} from \"@web3-react/walletconnect-connector\";\nimport {InjectedConnector} from \"@web3-react/injected-connector\";\nimport {NetworkConnector} from \"@web3-react/network-connector\";\nimport CoinbaseWalletSDK from \"@coinbase/wallet-sdk\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport Web3Modal from \"web3modal\";\nimport {toHex, truncateAddress} from \"./utils/utils\";\nimport { ethers } from \"ethers\";\nimport config from \"./local-dev-config\";\n\nconst providerOptions = {\n    coinbasewallet: {\n        package: CoinbaseWalletSDK, // Required\n        options: {\n            appName: \"Viridian Exchange\", // Required\n            rpc: \"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\", // Optional if `infuraId` is provided; otherwise it's required\n            chainId: 137, // Optional. It defaults to 1 if not provided\n            darkMode: true // Optional. Use dark theme, defaults to false\n        }\n    },\n    walletconnect: {\n        package: WalletConnectProvider, // required\n        options: {\n            rpc: {137: \"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\"},\n        }\n    },\n};\n\nconst networkParams = {\n    \"0x0100\": {\n        chainId: '0x13881',\n        rpcUrls: [\"https://eth-rinkeby.alchemyapi.io/v2/LAxJKtplSWDfvNU0-v7K77WOeCWYb4Js\"],\n        chainName: \"Polygon Mainnet\",\n        nativeCurrency: { name: \"Ether\", decimals: 18, symbol: \"ETH\" },\n        blockExplorerUrls: [\"https://explorer.harmony.one\"],\n        iconUrls: [\"https://harmonynews.one/wp-content/uploads/2019/11/slfdjs.png\"]\n    },\n};\n\nconst web3Modal = new Web3Modal({\n    network: \"mainnet\", // optional\n    cacheProvider: true, // optional\n    providerOptions, // required,\n    theme: \"dark\"\n});\n\n//TODO: show address, list of followers, description, etc on profile page\n// function in the smart contract to add a user that is followed\n// (triggered by follow button press-> calls the function which takes in an address and adds the user to the list of following)\n// front end will pull the followee user and be able to show the profile on the initial user\n// , and call in the CLI, once followers working, you will see another profile show up\n// use item flow -> Profile/user flow\n// get current user wallet, then abi->getuserfromaddress->return json of user struct\nfunction App() {\n    const [biconomyFetched, setBiconomyFetched] = useState(false);\n    const [account, setAccount] = useState();\n    const [provider, setProvider] = useState();\n    const [library, setLibrary] = useState();\n    const [biconomyLib, setBiconomy] = useState();\n    const [signature, setSignature] = useState(\"\");\n    const [error, setError] = useState(\"\");\n    const [chainId, setChainId] = useState();\n    const [network, setNetwork] = useState();\n    const [message, setMessage] = useState(\"\");\n    const [signedMessage, setSignedMessage] = useState(\"\");\n    const [verified, setVerified] = useState();\n    const [gaslessReady, setGaslessReady] = useState(false);\n\n    const connectWallet = async () => {\n        //try {\n            const provider = await web3Modal.connect();\n            let library = new Web3(provider);\n            let biconomy = new Biconomy(provider, {apiKey: \"TVCsgQVfk.a6031565-1cb6-40da-8a60-2ffec22e3bed\", debug: true});\n\n            biconomy.onEvent(biconomy.READY, () => {\n                // Initialize your dapp here like getting user accounts etc\n                //alert(\"initialized\");\n                setGaslessReady(true);\n                setBiconomy(biconomy);\n            }).onEvent(biconomy.ERROR, (error, message) => {\n                // Handle error while initializing mexa\n                alert(\"BICO ERR: \" + JSON.stringify(error));\n            });\n\n            setLibrary(library);\n            //alert(JSON.stringify(library.givenProvider));\n            const accounts = await library.eth.getAccounts();\n            //alert(JSON.stringify(accounts));\n            const network = await library.eth.net.getId();\n            //alert(JSON.stringify(network));\n            setProvider(provider);\n            setLibrary(library);\n            if (accounts) setAccount(accounts[0]);\n            setChainId(network);\n\n        // } catch (error) {\n        //     alert(JSON.stringify(error));\n        // }\n    };\n\n    const handleNetwork = (e) => {\n        const id = e.target.value;\n        setNetwork(Number(id));\n    };\n\n    const handleInput = (e) => {\n        const msg = e.target.value;\n        setMessage(msg);\n    };\n\n    const switchNetwork = async (toETH) => {\n        if (toETH) {\n            try {\n                await window.ethereum.request({\n                    method: \"wallet_switchEthereumChain\",\n                    params: [{chainId: toHex(1)}]\n                });\n            } catch (switchError) {\n                setError(error);\n            }\n        }\n        else {\n            try {\n                await window.ethereum.request({\n                    method: \"wallet_switchEthereumChain\",\n                    params: [{chainId: toHex(4)}]\n                });\n            } catch (switchError) {\n                //alert(JSON.stringify(switchError.code))\n                if (switchError.code === 4902) {\n                    try {\n                        await window.ethereum.request({\n                            method: 'wallet_addEthereumChain',\n                            params: [\n                                {\n                                    chainName: 'Polygon Mainnet',\n                                    chainId: toHex(4),\n                                    nativeCurrency: {\n                                        name: 'Polygon',\n                                        symbol: 'MATIC',\n                                        decimals: 18\n                                    },\n                                    rpcUrls: ['https://rpc-mainnet.maticvigil.com/'],\n                                    blockExplorerUrls: ['https://polygonscan.com/']\n                                }]\n                        });\n                    } catch (error) {\n                        setError(error);\n                    }\n                }\n            }\n        }\n    };\n\n    const refreshState = () => {\n        setAccount();\n        setChainId();\n        setNetwork(\"\");\n        setMessage(\"\");\n        setSignature(\"\");\n        setVerified(undefined);\n    };\n\n    const disconnect = async () => {\n        await web3Modal.clearCachedProvider();\n        refreshState();\n    };\n\n    useEffect(async () => {\n        if (web3Modal.cachedProvider) {\n            await connectWallet();\n        }\n    }, []);\n\n    useEffect(async () => {\n        //alert(chainId);\n        if (toHex(chainId) !== toHex(4)) {\n            await switchNetwork(false);\n        }\n    }, [chainId])\n\n    useEffect(() => {\n        if (provider?.on) {\n            const handleAccountsChanged = (accounts) => {\n                console.log(\"accountsChanged\", accounts);\n                if (accounts) setAccount(accounts[0]);\n            };\n\n            const handleChainChanged = (_hexChainId) => {\n                setChainId(_hexChainId);\n            };\n\n            const handleDisconnect = () => {\n                console.log(\"disconnect\", error);\n                disconnect();\n            };\n\n            provider.on(\"accountsChanged\", handleAccountsChanged);\n            provider.on(\"chainChanged\", handleChainChanged);\n            provider.on(\"disconnect\", handleDisconnect);\n\n            return () => {\n                if (provider.removeListener) {\n                    provider.removeListener(\"accountsChanged\", handleAccountsChanged);\n                    provider.removeListener(\"chainChanged\", handleChainChanged);\n                    provider.removeListener(\"disconnect\", handleDisconnect);\n                }\n            };\n        }\n    }, [provider]);\n\n  return (\n        <BreakpointProvider>\n            <Router forceRefresh={true}>\n              <Switch>\n                <Route\n                    exact\n                    path=\"/\"\n                >\n                  <Redirect to=\"/mint\" />\n                </Route>\n                <Route\n                    exact\n                    path=\"/mint\"\n                    render={() => (\n                        <Page library={library} chainId={chainId} biconomyFetched={biconomyFetched} account={account} setAccount={setAccount} connectWallet = {connectWallet} disconnect={disconnect}>\n                          <Mint setGaslessReady={setGaslessReady} library={library} biconomyFetched={biconomyFetched} account={account} setAccount={setAccount} gaslessReady={gaslessReady} connectWallet = {connectWallet} />\n                        </Page>\n                    )}\n                />\n                <Route\n                    exact\n                    path=\"/open\"\n                    render={() => (\n                        <Page library={library} chainId={chainId} biconomyFetched={biconomyFetched} account={account} setAccount={setAccount} connectWallet = {connectWallet} disconnect={disconnect}>\n                          <Open setGaslessReady={setGaslessReady} gaslessReady={gaslessReady}F biconomyFetched={biconomyFetched} account={account} setAccount={setAccount} />\n                        </Page>\n                    )}\n                />\n                <Route\n                    exact\n                    path=\"/verify\"\n                    render={() => (\n                        <Page library={library} chainId={chainId}>\n                          <Verify  />\n                        </Page>\n                    )}\n                />\n                {/*<Route*/}\n                {/*    exact*/}\n                {/*    path=\"/faq\"*/}\n                {/*    render={() => (*/}\n                {/*        <Page>*/}\n                {/*          <Faq />*/}\n                {/*        </Page>*/}\n                {/*    )}*/}\n                {/*/>*/}\n                <Route path=\"*\">\n                  <Redirect to=\"/mint\" />\n                </Route>\n              </Switch>\n            </Router>\n        </BreakpointProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}