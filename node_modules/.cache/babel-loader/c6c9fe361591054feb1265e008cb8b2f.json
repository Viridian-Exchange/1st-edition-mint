{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _require = require(\"ethers\"),\n    ethers = _require.ethers;\n\nvar _require2 = require(\"./config\"),\n    config = _require2.config;\n\nvar ZERO_ADDRESS = config.ZERO_ADDRESS;\n\nvar buildForwardTxRequest = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(account, to, gasLimitNum, data, biconomyForwarder) {\n    var batchId,\n        batchNonce,\n        req,\n        _args = arguments;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            batchId = _args.length > 5 && _args[5] !== undefined ? _args[5] : 0;\n\n            if (biconomyForwarder) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Biconomy Forwarder is not defined for current network\");\n\n          case 3:\n            _context.next = 5;\n            return biconomyForwarder.getNonce(account, batchId);\n\n          case 5:\n            batchNonce = _context.sent;\n            req = {\n              from: account,\n              to: to,\n              token: ZERO_ADDRESS,\n              txGas: gasLimitNum,\n              tokenGasPrice: \"0\",\n              batchId: batchId,\n              batchNonce: parseInt(batchNonce),\n              deadline: Math.floor(Date.now() / 1000 + 3600),\n              data: data\n            };\n            return _context.abrupt(\"return\", {\n              request: req\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function buildForwardTxRequest(_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getDomainSeperator = function getDomainSeperator(biconomyForwarderDomainData) {\n  var domainSeparator = ethers.utils.keccak256(ethers.utils.defaultAbiCoder.encode([\"bytes32\", \"bytes32\", \"bytes32\", \"address\", \"bytes32\"], [ethers.utils.id(\"EIP712Domain(string name,string version,address verifyingContract,bytes32 salt)\"), ethers.utils.id(biconomyForwarderDomainData.name), ethers.utils.id(biconomyForwarderDomainData.version), biconomyForwarderDomainData.verifyingContract, biconomyForwarderDomainData.salt]));\n  return domainSeparator;\n};\n\nmodule.exports = {\n  buildForwardTxRequest: buildForwardTxRequest,\n  getDomainSeperator: getDomainSeperator\n};","map":{"version":3,"sources":["/Users/blakehatch/WebstormProjects/1st-edition-mint/node_modules/@biconomy/mexa/common-js/biconomyforwarder.js"],"names":["_interopRequireDefault","require","_regenerator","_asyncToGenerator2","_require","ethers","_require2","config","ZERO_ADDRESS","buildForwardTxRequest","_ref","mark","_callee","account","to","gasLimitNum","data","biconomyForwarder","batchId","batchNonce","req","_args","arguments","wrap","_callee$","_context","prev","next","length","undefined","Error","getNonce","sent","from","token","txGas","tokenGasPrice","parseInt","deadline","Math","floor","Date","now","abrupt","request","stop","_x","_x2","_x3","_x4","_x5","apply","getDomainSeperator","biconomyForwarderDomainData","domainSeparator","utils","keccak256","defaultAbiCoder","encode","id","name","version","verifyingContract","salt","module","exports"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _require = require(\"ethers\"),\n    ethers = _require.ethers;\n\nvar _require2 = require(\"./config\"),\n    config = _require2.config;\n\nvar ZERO_ADDRESS = config.ZERO_ADDRESS;\n\nvar buildForwardTxRequest = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(account, to, gasLimitNum, data, biconomyForwarder) {\n    var batchId,\n        batchNonce,\n        req,\n        _args = arguments;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            batchId = _args.length > 5 && _args[5] !== undefined ? _args[5] : 0;\n\n            if (biconomyForwarder) {\n              _context.next = 3;\n              break;\n            }\n\n            throw new Error(\"Biconomy Forwarder is not defined for current network\");\n\n          case 3:\n            _context.next = 5;\n            return biconomyForwarder.getNonce(account, batchId);\n\n          case 5:\n            batchNonce = _context.sent;\n            req = {\n              from: account,\n              to: to,\n              token: ZERO_ADDRESS,\n              txGas: gasLimitNum,\n              tokenGasPrice: \"0\",\n              batchId: batchId,\n              batchNonce: parseInt(batchNonce),\n              deadline: Math.floor(Date.now() / 1000 + 3600),\n              data: data\n            };\n            return _context.abrupt(\"return\", {\n              request: req\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function buildForwardTxRequest(_x, _x2, _x3, _x4, _x5) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getDomainSeperator = function getDomainSeperator(biconomyForwarderDomainData) {\n  var domainSeparator = ethers.utils.keccak256(ethers.utils.defaultAbiCoder.encode([\"bytes32\", \"bytes32\", \"bytes32\", \"address\", \"bytes32\"], [ethers.utils.id(\"EIP712Domain(string name,string version,address verifyingContract,bytes32 salt)\"), ethers.utils.id(biconomyForwarderDomainData.name), ethers.utils.id(biconomyForwarderDomainData.version), biconomyForwarderDomainData.verifyingContract, biconomyForwarderDomainData.salt]));\n  return domainSeparator;\n};\n\nmodule.exports = {\n  buildForwardTxRequest: buildForwardTxRequest,\n  getDomainSeperator: getDomainSeperator\n};"]},"metadata":{},"sourceType":"script"}