{"ast":null,"code":"var _jsxFileName = \"/Users/blakehatch/WebstormProjects/1st-edition-mint/src/components/Header/User/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport cn from \"classnames\";\nimport OutsideClickHandler from \"react-outside-click-handler\";\nimport styles from \"./User.module.sass\";\nimport Icon from \"../../Icon\";\nimport Theme from \"../../Theme\";\nimport Web3 from \"web3\";\nimport config from \"../../../local-dev-config\"; //import veJSON from \"../../../abis/ViridianExchange.json\";\n\nimport vTJSON from \"../../../abis/ViridianToken.json\";\nimport BigNumber from \"bignumber.js\"; //import {FetchUser} from \"../../../apis/UserAPI\";\n\nimport ReactLoading from \"react-loading\";\nimport { useCryptoPrices, CryptoPriceProvider } from \"react-realtime-crypto-prices\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport WalletSelector from \"../../WalletSelector\";\nimport { useWeb3React } from '@web3-react/core';\nimport CoinbaseWalletSDK from '@coinbase/wallet-sdk';\nimport Web3Modal from \"web3modal\"; // const wcProvider = new WalletConnectProvider({\n//   rpc: {1: \"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\"},\n//   bridge: \"https://bridge.walletconnect.org\",\n//   qrcodeModalOptions: {\n//   },\n// });\n//let web3 = new Web3(new Web3.providers.HttpProvider(\"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\") || new Web3.providers.HttpProvider(\"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\") || \"HTTP://127.0.0.1:7545\");\n//TODO: Instead of account, pass in user with all info through to profile/user\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst items = account => [];\n\nlet provider;\nlet web3Modal;\nlet selectedAccount;\n\nconst User = ({\n  className,\n  connected,\n  setConnected,\n  userInfo,\n  setUserInfo,\n  ethBalance,\n  setEthBalance,\n  setPromptInstallMetamask,\n  setVisibleModalWallets\n}) => {\n  _s();\n\n  const [visible, setVisible] = useState(false);\n  const [walletVis, setWalletVis] = useState(false);\n  const [balance, setBalance] = useState(0);\n  const [account, setAccount] = useState(''); // const providerOptions = {\n  //   coinbasewallet: {\n  //     package: CoinbaseWalletSDK, // Required\n  //     options: {\n  //       appName: \"My Awesome App\", // Required\n  //       infuraId: \"INFURA_ID\", // Required\n  //       rpc: \"\", // Optional if `infuraId` is provided; otherwise it's required\n  //       chainId: 1, // Optional. It defaults to 1 if not provided\n  //       darkMode: true // Optional. Use dark theme, defaults to false\n  //     }\n  //   },\n  //   walletconnect: {\n  //     package: WalletConnectProvider, // required\n  //     options: {\n  //       infuraId: \"INFURA_ID\" // required\n  //     }\n  //   },\n  // };\n  //\n  // const web3Modal = new Web3Modal({\n  //   network: \"mainnet\", // optional\n  //   cacheProvider: true, // optional\n  //   providerOptions, // required,\n  //   theme: \"dark\"\n  // });\n  // let provider = await web3Modal.connect();\n  //\n  //\n  // if (web3Modal.cachedProvider) {\n  //   provider = await web3Modal.connect();\n  // }\n  //\n  // const web3 = new Web3(provider);\n  //Todo: if they press skip for now, then link address to user struct and default profile picture\n  //const [ethBalance, setEthBalance] = useState(0);\n\n  useEffect(async () => {\n    if (account) {\n      setBalance(parseBalance(await getBalance()));\n    }\n  }, []);\n\n  const isMetaMaskInstalled = () => {\n    //Have to check the ethereum binding on the window object to see if it's installed\n    const {\n      ethereum\n    } = window;\n\n    if (!Boolean(ethereum && ethereum.isMetaMask)) {\n      setPromptInstallMetamask(true);\n    }\n  };\n\n  async function connectWallet() {\n    try {\n      // Will open the MetaMask UI\n      // You should disable this button while the request is pending!\n      await window.ethereum.request({\n        method: 'eth_requestAccounts'\n      }).then(async accounts => {\n        setAccount(accounts[0]);\n\n        if (accounts[0]) {//await FetchUser(setUserInfo, accounts[0]);\n          //alert(\"FETCH FROM USER SCREEN\")\n        } //alert(accounts[0]);\n        //alert(JSON.stringify(account));\n\n      }); //alert(JSON.stringify(web3));\n      // await web3.eth.getBalance(account).then(async (balance) => {\n      //   //alert(balance);\n      //     await setEthBalance(round(balance * .000000000000000001, 4))});\n\n      await setBalance(await getBalance());\n      await setConnected(true); //alert(\"setting connected from user/index\");\n      // await setUserInfo(await getUserInfo());\n      //alert(account);\n      //await web3.eth.sign(web3.utils.sha3(\"test\"), account, function (err, result) { //console.log(err, result); });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function getBalance() {// const vtContractAddress = config.mumbai_contract_addresses.vt_contract;\n    // ////console.log(JSON.stringify(vNFTJSON));\n    // //alert(account);\n    // let vtABI = new web3.eth.Contract(vTJSON['abi'], vtContractAddress);\n    // return await vtABI.methods.balanceOf(account).call();\n  }\n\n  function parseBalance(balance) {\n    balance = new BigNumber(balance);\n\n    if (10000 < balance && balance < 1000000.0) {\n      return (balance / 1000).toFixed(2) + \"K\";\n    } else if (balance > 1000000.0) {\n      return (balance / 1000000).toFixed(2) + \"M\";\n    } else {\n      return balance.toFixed(2);\n    }\n  }\n\n  const round = (number, decimalPlaces) => {\n    const factorOfTen = Math.pow(10, decimalPlaces);\n    return Math.round(number * factorOfTen) / factorOfTen;\n  };\n\n  const shortenAccount = () => {\n    if (account) {\n      return account.toString().substring(0, 6) + \"...\" + account.toString().substring(38);\n    }\n  };\n\n  function init() {\n    console.log(\"Initializing example\");\n    console.log(\"WalletConnectProvider is\", WalletConnectProvider); // Tell Web3modal what providers we have available.\n    // Built-in web browser provider (only one can exist as a time)\n    // like MetaMask, Brave or Opera is added automatically by Web3modal\n\n    const providerOptions = {\n      walletconnect: {\n        package: WalletConnectProvider,\n        options: {\n          // Mikko's test key - don't copy as your mileage may vary\n          infuraId: \"8043bb2cf99347b1bfadfb233c5325c0\"\n        }\n      }\n    };\n    web3Modal = new Web3Modal({\n      cacheProvider: false,\n      // optional\n      providerOptions,\n      // required\n      theme: \"dark\"\n    });\n  }\n  /**\n   * Kick in the UI action after Web3modal dialog has chosen a provider\n   */\n\n\n  async function fetchAccountData() {\n    // Get a Web3 instance for the wallet\n    const web3 = new Web3(provider);\n    console.log(\"Web3 instance is\", web3); // Get connected chain id from Ethereum node\n\n    const chainId = await web3.eth.getChainId(); // Load chain information over an HTTP API\n\n    const chainData = await EvmChains.getChain(chainId);\n    document.querySelector(\"#network-name\").textContent = chainData.name; // Get list of accounts of the connected wallet\n\n    const accounts = await web3.eth.getAccounts(); // MetaMask does not give you all accounts, only the selected account\n\n    console.log(\"Got accounts\", accounts);\n    selectedAccount = accounts[0];\n    document.querySelector(\"#selected-account\").textContent = selectedAccount; // Get a handl\n\n    const template = document.querySelector(\"#template-balance\");\n    const accountContainer = document.querySelector(\"#accounts\"); // Purge UI elements any previously loaded accounts\n\n    accountContainer.innerHTML = ''; // Go through all accounts and get their ETH balance\n\n    const rowResolvers = accounts.map(async address => {\n      const balance = await web3.eth.getBalance(address); // ethBalance is a BigNumber instance\n      // https://github.com/indutny/bn.js/\n\n      const ethBalance = web3.utils.fromWei(balance, \"ether\");\n      const humanFriendlyBalance = parseFloat(ethBalance).toFixed(4); // Fill in the templated row and put in the document\n\n      const clone = template.content.cloneNode(true);\n      clone.querySelector(\".address\").textContent = address;\n      clone.querySelector(\".balance\").textContent = humanFriendlyBalance;\n      accountContainer.appendChild(clone);\n    }); // Because rendering account does its own RPC commucation\n    // with Ethereum node, we do not want to display any results\n    // until data for all accounts is loaded\n\n    await Promise.all(rowResolvers); // Display fully loaded UI for wallet data\n\n    document.querySelector(\"#prepare\").style.display = \"none\";\n    document.querySelector(\"#connected\").style.display = \"block\";\n  }\n  /**\n   * Fetch account data for UI when\n   * - User switches accounts in wallet\n   * - User switches networks in wallet\n   * - User connects wallet initially\n   */\n\n\n  async function refreshAccountData() {\n    // If any current data is displayed when\n    // the user is switching acounts in the wallet\n    // immediate hide this data\n    document.querySelector(\"#connected\").style.display = \"none\";\n    document.querySelector(\"#prepare\").style.display = \"block\"; // Disable button while UI is loading.\n    // fetchAccountData() will take a while as it communicates\n    // with Ethereum node via JSON-RPC and loads chain data\n    // over an API call.\n\n    document.querySelector(\"#btn-connect\").setAttribute(\"disabled\", \"disabled\");\n    await fetchAccountData(provider);\n    document.querySelector(\"#btn-connect\").removeAttribute(\"disabled\");\n  }\n  /**\n   * Connect wallet button pressed.\n   */\n\n\n  async function onConnect() {\n    console.log(\"Opening a dialog\", web3Modal);\n\n    try {\n      provider = await web3Modal.connect();\n    } catch (e) {\n      console.log(\"Could not get a wallet connection\", e);\n      return;\n    } // Subscribe to accounts change\n\n\n    provider.on(\"accountsChanged\", accounts => {\n      fetchAccountData();\n    }); // Subscribe to chainId change\n\n    provider.on(\"chainChanged\", chainId => {\n      fetchAccountData();\n    }); // Subscribe to networkId change\n\n    provider.on(\"networkChanged\", networkId => {\n      fetchAccountData();\n    });\n    await refreshAccountData();\n  }\n  /**\n   * Disconnect wallet button pressed.\n   */\n\n\n  async function onDisconnect() {\n    console.log(\"Killing the wallet connection\", provider); // TODO: Which providers have close method?\n\n    if (provider.close) {\n      await provider.close(); // If the cached provider is not cleared,\n      // WalletConnect will default to the existing session\n      // and does not allow to re-scan the QR code with a new wallet.\n      // Depending on your use case you may want or want not his behavir.\n\n      await web3Modal.clearCachedProvider();\n      provider = null;\n    }\n\n    selectedAccount = null; // Set the UI back to the initial state\n\n    document.querySelector(\"#prepare\").style.display = \"block\";\n    document.querySelector(\"#connected\").style.display = \"none\";\n  } //alert(account);\n\n\n  if (account) {\n    //if username is empty, ask to set up\n    return /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n      onOutsideClick: () => setVisible(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles.user, className),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.head,\n          onClick: () => setVisible(!visible),\n          children: balance === 0 ? [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.avatar,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"wallet\",\n              fill: \"white\",\n              size: \"32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.wallet,\n            children: account.toString().substring(0, 2) + \"...\" + account.toString().substring(38)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 17\n          }, this)] : [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.avatar,\n            children: /*#__PURE__*/_jsxDEV(Icon, {\n              name: \"wallet\",\n              fill: \"white\",\n              size: \"32\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 28\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: ethBalance === 0 && parseBalance(balance) !== \"0.00\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.wallet,\n              children: [parseBalance(balance), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.currency,\n                children: \"USDT\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 35\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 82\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.wallet,\n              children: account.toString().substring(0, 2) + \"...\" + account.toString().substring(38)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 22\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 17\n          }, this)]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 9\n        }, this), visible && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.body,\n          children: [/*#__PURE__*/_jsxDEV(CopyToClipboard, {\n            text: account // onCopy={() => this.setState({copied: true})}\n            ,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.code,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.number,\n                children: shortenAccount()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: styles.copy,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: \"copy\",\n                  size: \"16\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.wrap,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.line,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.details,\n                style: {\n                  marginLeft: '-1ex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: styles.info,\n                  children: \"Balance\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: ethBalance === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.price,\n                    children: [parseBalance(balance), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: styles.currency,\n                      children: \"USDT\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 386,\n                      columnNumber: 51\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 52\n                  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: styles.price,\n                    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        width: '2ex',\n                        marginTop: '-.4ex'\n                      },\n                      src: \"https://upload.wikimedia.org/wikipedia/commons/6/6f/Ethereum-icon-purple.svg\",\n                      alt: \"ETH\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 388,\n                      columnNumber: 27\n                    }, this), ethBalance]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 387,\n                    columnNumber: 34\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 376,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.menu,\n            children: items(account).map((x, index) => x.url ? x.url.startsWith(\"http\") ? /*#__PURE__*/_jsxDEV(\"a\", {\n              className: styles.item,\n              href: x.url,\n              rel: \"noopener noreferrer\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.icon,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: x.icon,\n                  size: \"20\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 35\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.text,\n                children: x.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 414,\n                columnNumber: 35\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(Link, {\n              className: styles.item,\n              onClick: () => setVisible(!visible),\n              to: {\n                pathname: x.url,\n                state: {\n                  account: account\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.icon,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: x.icon,\n                  size: \"20\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 423,\n                columnNumber: 35\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.text,\n                children: x.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 426,\n                columnNumber: 35\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.item,\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.icon,\n                children: /*#__PURE__*/_jsxDEV(Icon, {\n                  name: x.icon,\n                  size: \"20\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.text,\n                children: x.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 434,\n                columnNumber: 31\n              }, this), /*#__PURE__*/_jsxDEV(Theme, {\n                className: styles.theme\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 435,\n                columnNumber: 31\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 29\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 5\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(OutsideClickHandler, {\n      onOutsideClick: () => {\n        setWalletVis(false);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: cn(styles.user, className),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.head,\n          onClick: () => onConnect(),\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.disconnectedWallet,\n            children: \"Connect Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 12\n        }, this), walletVis && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.body,\n          children: /*#__PURE__*/_jsxDEV(WalletSelector, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 9\n    }, this);\n  }\n};\n\n_s(User, \"1pPfFZZUtes0bTzi7W3+mWAnvbY=\");\n\n_c = User;\nexport default User;\n\nvar _c;\n\n$RefreshReg$(_c, \"User\");","map":{"version":3,"sources":["/Users/blakehatch/WebstormProjects/1st-edition-mint/src/components/Header/User/index.js"],"names":["React","useState","useEffect","Link","cn","OutsideClickHandler","styles","Icon","Theme","Web3","config","vTJSON","BigNumber","ReactLoading","useCryptoPrices","CryptoPriceProvider","CopyToClipboard","WalletConnectProvider","WalletSelector","useWeb3React","CoinbaseWalletSDK","Web3Modal","items","account","provider","web3Modal","selectedAccount","User","className","connected","setConnected","userInfo","setUserInfo","ethBalance","setEthBalance","setPromptInstallMetamask","setVisibleModalWallets","visible","setVisible","walletVis","setWalletVis","balance","setBalance","setAccount","parseBalance","getBalance","isMetaMaskInstalled","ethereum","window","Boolean","isMetaMask","connectWallet","request","method","then","accounts","error","console","toFixed","round","number","decimalPlaces","factorOfTen","Math","pow","shortenAccount","toString","substring","init","log","providerOptions","walletconnect","package","options","infuraId","cacheProvider","theme","fetchAccountData","web3","chainId","eth","getChainId","chainData","EvmChains","getChain","document","querySelector","textContent","name","getAccounts","template","accountContainer","innerHTML","rowResolvers","map","address","utils","fromWei","humanFriendlyBalance","parseFloat","clone","content","cloneNode","appendChild","Promise","all","style","display","refreshAccountData","setAttribute","removeAttribute","onConnect","connect","e","on","networkId","onDisconnect","close","clearCachedProvider","user","head","avatar","wallet","currency","body","code","copy","wrap","line","details","marginLeft","info","price","width","marginTop","menu","x","index","url","startsWith","item","icon","text","title","pathname","state","disconnectedWallet"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport cn from \"classnames\";\nimport OutsideClickHandler from \"react-outside-click-handler\";\nimport styles from \"./User.module.sass\";\nimport Icon from \"../../Icon\";\nimport Theme from \"../../Theme\";\nimport Web3 from \"web3\";\nimport config from \"../../../local-dev-config\";\n//import veJSON from \"../../../abis/ViridianExchange.json\";\nimport vTJSON from \"../../../abis/ViridianToken.json\";\nimport BigNumber from \"bignumber.js\";\n//import {FetchUser} from \"../../../apis/UserAPI\";\nimport ReactLoading from \"react-loading\";\nimport {\n  useCryptoPrices,\n  CryptoPriceProvider\n} from \"react-realtime-crypto-prices\";\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport WalletSelector from \"../../WalletSelector\";\nimport { useWeb3React } from '@web3-react/core'\nimport CoinbaseWalletSDK from '@coinbase/wallet-sdk';\nimport Web3Modal from \"web3modal\";\n\n// const wcProvider = new WalletConnectProvider({\n//   rpc: {1: \"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\"},\n//   bridge: \"https://bridge.walletconnect.org\",\n//   qrcodeModalOptions: {\n//   },\n// });\n\n//let web3 = new Web3(new Web3.providers.HttpProvider(\"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\") || new Web3.providers.HttpProvider(\"https://polygon-mumbai.g.alchemy.com/v2/XvPpXkhm8UtkGw9b8tIMcR3vr1zTZd3b\") || \"HTTP://127.0.0.1:7545\");\n\n//TODO: Instead of account, pass in user with all info through to profile/user\nconst items = (account) => [\n];\n\nlet provider;\nlet web3Modal;\nlet selectedAccount;\n\nconst User = ({ className, connected, setConnected, userInfo, setUserInfo, ethBalance, setEthBalance, setPromptInstallMetamask, setVisibleModalWallets}) => {\n  const [visible, setVisible] = useState(false);\n  const [walletVis, setWalletVis] = useState(false);\n  const [balance, setBalance] = useState(0);\n  const [account, setAccount] = useState('');\n\n  // const providerOptions = {\n  //   coinbasewallet: {\n  //     package: CoinbaseWalletSDK, // Required\n  //     options: {\n  //       appName: \"My Awesome App\", // Required\n  //       infuraId: \"INFURA_ID\", // Required\n  //       rpc: \"\", // Optional if `infuraId` is provided; otherwise it's required\n  //       chainId: 1, // Optional. It defaults to 1 if not provided\n  //       darkMode: true // Optional. Use dark theme, defaults to false\n  //     }\n  //   },\n  //   walletconnect: {\n  //     package: WalletConnectProvider, // required\n  //     options: {\n  //       infuraId: \"INFURA_ID\" // required\n  //     }\n  //   },\n  // };\n  //\n  // const web3Modal = new Web3Modal({\n  //   network: \"mainnet\", // optional\n  //   cacheProvider: true, // optional\n  //   providerOptions, // required,\n  //   theme: \"dark\"\n  // });\n\n  // let provider = await web3Modal.connect();\n  //\n  //\n  // if (web3Modal.cachedProvider) {\n  //   provider = await web3Modal.connect();\n  // }\n  //\n  // const web3 = new Web3(provider);\n\n  //Todo: if they press skip for now, then link address to user struct and default profile picture\n  //const [ethBalance, setEthBalance] = useState(0);\n\n  useEffect(async () => {\n    if(account) {\n      setBalance(parseBalance(await getBalance()));\n    }\n  }, []);\n\n\n  const isMetaMaskInstalled = () => {\n    //Have to check the ethereum binding on the window object to see if it's installed\n    const {ethereum} = window;\n    if (!Boolean(ethereum && ethereum.isMetaMask)) {\n      setPromptInstallMetamask(true);\n    }\n  };\n\n\n  async function connectWallet() {\n    try {\n      // Will open the MetaMask UI\n      // You should disable this button while the request is pending!\n      await window.ethereum.request({ method: 'eth_requestAccounts' }).then(async (accounts) => {\n        setAccount(accounts[0]);\n        if (accounts[0]) {\n          //await FetchUser(setUserInfo, accounts[0]);\n          //alert(\"FETCH FROM USER SCREEN\")\n        }\n        //alert(accounts[0]);\n        //alert(JSON.stringify(account));\n      });\n\n\n      //alert(JSON.stringify(web3));\n      // await web3.eth.getBalance(account).then(async (balance) => {\n      //   //alert(balance);\n      //     await setEthBalance(round(balance * .000000000000000001, 4))});\n      await setBalance(await getBalance());\n      await setConnected(true);\n\n      //alert(\"setting connected from user/index\");\n\n      // await setUserInfo(await getUserInfo());\n\n\n\n\n\n      //alert(account);\n      //await web3.eth.sign(web3.utils.sha3(\"test\"), account, function (err, result) { //console.log(err, result); });\n    } catch (error) {\n      console.error(error);\n    }\n  }\n\n  async function getBalance() {\n\n    // const vtContractAddress = config.mumbai_contract_addresses.vt_contract;\n    // ////console.log(JSON.stringify(vNFTJSON));\n    // //alert(account);\n    // let vtABI = new web3.eth.Contract(vTJSON['abi'], vtContractAddress);\n    // return await vtABI.methods.balanceOf(account).call();\n  }\n\n  function parseBalance(balance) {\n    balance = new BigNumber(balance);\n    if (10000 < balance && balance < 1000000.0) {\n      return (balance / 1000).toFixed(2) + \"K\"\n    }\n    else if (balance > 1000000.0) {\n      return (balance / 1000000).toFixed(2) + \"M\"\n    }\n    else {\n      return balance.toFixed(2);\n    }\n  }\n\n  const round = (number, decimalPlaces) => {\n    const factorOfTen = Math.pow(10, decimalPlaces)\n    return Math.round(number * factorOfTen) / factorOfTen\n  }\n\n  const shortenAccount = () => {\n    if (account) {\n      return account.toString().substring(0, 6) + \"...\" + account.toString().substring(38);\n    }\n  }\n\n  function init() {\n\n    console.log(\"Initializing example\");\n    console.log(\"WalletConnectProvider is\", WalletConnectProvider);\n\n    // Tell Web3modal what providers we have available.\n    // Built-in web browser provider (only one can exist as a time)\n    // like MetaMask, Brave or Opera is added automatically by Web3modal\n    const providerOptions = {\n      walletconnect: {\n        package: WalletConnectProvider,\n        options: {\n          // Mikko's test key - don't copy as your mileage may vary\n          infuraId: \"8043bb2cf99347b1bfadfb233c5325c0\",\n        }\n      }\n    };\n\n    web3Modal = new Web3Modal({\n      cacheProvider: false, // optional\n      providerOptions, // required\n      theme: \"dark\"\n    });\n\n  }\n\n\n  /**\n   * Kick in the UI action after Web3modal dialog has chosen a provider\n   */\n  async function fetchAccountData() {\n\n    // Get a Web3 instance for the wallet\n    const web3 = new Web3(provider);\n\n    console.log(\"Web3 instance is\", web3);\n\n    // Get connected chain id from Ethereum node\n    const chainId = await web3.eth.getChainId();\n    // Load chain information over an HTTP API\n    const chainData = await EvmChains.getChain(chainId);\n    document.querySelector(\"#network-name\").textContent = chainData.name;\n\n    // Get list of accounts of the connected wallet\n    const accounts = await web3.eth.getAccounts();\n\n    // MetaMask does not give you all accounts, only the selected account\n    console.log(\"Got accounts\", accounts);\n    selectedAccount = accounts[0];\n\n    document.querySelector(\"#selected-account\").textContent = selectedAccount;\n\n    // Get a handl\n    const template = document.querySelector(\"#template-balance\");\n    const accountContainer = document.querySelector(\"#accounts\");\n\n    // Purge UI elements any previously loaded accounts\n    accountContainer.innerHTML = '';\n\n    // Go through all accounts and get their ETH balance\n    const rowResolvers = accounts.map(async (address) => {\n      const balance = await web3.eth.getBalance(address);\n      // ethBalance is a BigNumber instance\n      // https://github.com/indutny/bn.js/\n      const ethBalance = web3.utils.fromWei(balance, \"ether\");\n      const humanFriendlyBalance = parseFloat(ethBalance).toFixed(4);\n      // Fill in the templated row and put in the document\n      const clone = template.content.cloneNode(true);\n      clone.querySelector(\".address\").textContent = address;\n      clone.querySelector(\".balance\").textContent = humanFriendlyBalance;\n      accountContainer.appendChild(clone);\n    });\n\n    // Because rendering account does its own RPC commucation\n    // with Ethereum node, we do not want to display any results\n    // until data for all accounts is loaded\n    await Promise.all(rowResolvers);\n\n    // Display fully loaded UI for wallet data\n    document.querySelector(\"#prepare\").style.display = \"none\";\n    document.querySelector(\"#connected\").style.display = \"block\";\n  }\n\n\n\n  /**\n   * Fetch account data for UI when\n   * - User switches accounts in wallet\n   * - User switches networks in wallet\n   * - User connects wallet initially\n   */\n  async function refreshAccountData() {\n\n    // If any current data is displayed when\n    // the user is switching acounts in the wallet\n    // immediate hide this data\n    document.querySelector(\"#connected\").style.display = \"none\";\n    document.querySelector(\"#prepare\").style.display = \"block\";\n\n    // Disable button while UI is loading.\n    // fetchAccountData() will take a while as it communicates\n    // with Ethereum node via JSON-RPC and loads chain data\n    // over an API call.\n    document.querySelector(\"#btn-connect\").setAttribute(\"disabled\", \"disabled\")\n    await fetchAccountData(provider);\n    document.querySelector(\"#btn-connect\").removeAttribute(\"disabled\")\n  }\n\n\n  /**\n   * Connect wallet button pressed.\n   */\n  async function onConnect() {\n\n    console.log(\"Opening a dialog\", web3Modal);\n    try {\n      provider = await web3Modal.connect();\n    } catch(e) {\n      console.log(\"Could not get a wallet connection\", e);\n      return;\n    }\n\n    // Subscribe to accounts change\n    provider.on(\"accountsChanged\", (accounts) => {\n      fetchAccountData();\n    });\n\n    // Subscribe to chainId change\n    provider.on(\"chainChanged\", (chainId) => {\n      fetchAccountData();\n    });\n\n    // Subscribe to networkId change\n    provider.on(\"networkChanged\", (networkId) => {\n      fetchAccountData();\n    });\n\n    await refreshAccountData();\n  }\n\n  /**\n   * Disconnect wallet button pressed.\n   */\n  async function onDisconnect() {\n\n    console.log(\"Killing the wallet connection\", provider);\n\n    // TODO: Which providers have close method?\n    if(provider.close) {\n      await provider.close();\n\n      // If the cached provider is not cleared,\n      // WalletConnect will default to the existing session\n      // and does not allow to re-scan the QR code with a new wallet.\n      // Depending on your use case you may want or want not his behavir.\n      await web3Modal.clearCachedProvider();\n      provider = null;\n    }\n\n    selectedAccount = null;\n\n    // Set the UI back to the initial state\n    document.querySelector(\"#prepare\").style.display = \"block\";\n    document.querySelector(\"#connected\").style.display = \"none\";\n  }\n\n  //alert(account);\n  if (account) {\n    //if username is empty, ask to set up\n  return (\n    <OutsideClickHandler onOutsideClick={() => setVisible(false)}>\n      <div className={cn(styles.user, className)}>\n        <div className={styles.head} onClick={() => setVisible(!visible)}>\n          {(balance === 0) ?\n              [<div className={styles.avatar}>\n                <Icon name=\"wallet\" fill='white' size=\"32\" />\n              </div>,\n                <div className={styles.wallet}>\n                  {account.toString().substring(0, 2) + \"...\" + account.toString().substring(38)}\n                </div>] : [<div className={styles.avatar}>\n                <Icon name=\"wallet\" fill='white' size=\"32\" />\n            </div>,\n                <div>{(ethBalance === 0) && (parseBalance(balance) !== \"0.00\") ? <div className={styles.wallet}>\n          {parseBalance(balance)} <span className={styles.currency}>USDT</span>\n            </div> : <div className={styles.wallet}>\n                  {/*<img style={{width: '3ex', marginTop: '-.5ex', marginLeft: '-1ex'}} src='https://upload.wikimedia.org/wikipedia/commons/6/6f/Ethereum-icon-purple.svg' alt='ETH' />*/}\n                  {/*{ethBalance}*/}\n                  {account.toString().substring(0, 2) + \"...\" + account.toString().substring(38)}\n                </div>}</div>]}\n        </div>\n            {visible && (\n                <div className={styles.body}>\n                  <CopyToClipboard text={account}\n                      // onCopy={() => this.setState({copied: true})}\n                  >\n                    <div className={styles.code}>\n                      <div className={styles.number}>{shortenAccount()}</div>\n                      <button className={styles.copy}>\n                        <Icon name=\"copy\" size=\"16\"/>\n                      </button>\n                    </div>\n                  </CopyToClipboard>\n                  <div className={styles.wrap}>\n                    <div className={styles.line}>\n                      {/*<div className={styles.preview}>*/}\n                      {/*  <img*/}\n                      {/*      src=\"/images/content/ve_circle.png\"*/}\n                      {/*      alt=\"Ethereum\"*/}\n                      {/*  />*/}\n                      {/*</div>*/}\n                      <div className={styles.details} style={{marginLeft: '-1ex'}}>\n                        <div className={styles.info}>Balance</div>\n                        <div>{(ethBalance === 0) ? <div className={styles.price}>\n                          {parseBalance(balance)} <span className={styles.currency}>USDT</span>\n                        </div> : <div className={styles.price}>\n                          <img style={{width: '2ex', marginTop: '-.4ex'}} src='https://upload.wikimedia.org/wikipedia/commons/6/6f/Ethereum-icon-purple.svg' alt='ETH' />\n                          {ethBalance}\n                          {/*<>{prices.eth && <div style={{color: 'grey', fontSize: '5'}}>${Math.round((prices.eth * ethBalance) * 100) / 100}</div>}</>*/}\n                          {/*<span className={styles.currency}>ETH</span>*/}\n                        </div>}</div>\n                      </div>\n                    </div>\n                    {/*<button*/}\n                    {/*    className={cn(\"button-stroke button-small\", styles.button)}*/}\n                    {/*>*/}\n                    {/*  Manage fun on Coinbase*/}\n                    {/*</button>*/}\n                  </div>\n                  <div className={styles.menu}>\n                    {items(account).map((x, index) =>\n                        x.url ? (\n                            x.url.startsWith(\"http\") ? (\n                                <a\n                                    className={styles.item}\n                                    href={x.url}\n                                    rel=\"noopener noreferrer\"\n                                    key={index}\n                                >\n                                  <div className={styles.icon}>\n                                    <Icon name={x.icon} size=\"20\"/>\n                                  </div>\n                                  <div className={styles.text}>{x.title}</div>\n                                </a>\n                            ) : (\n                                <Link\n                                    className={styles.item}\n                                    onClick={() => setVisible(!visible)}\n                                    key={index}\n                                    to={{ pathname: x.url, state: { account: account }}}\n                                >\n                                  <div className={styles.icon}>\n                                    <Icon name={x.icon} size=\"20\"/>\n                                  </div>\n                                  <div className={styles.text}>{x.title}</div>\n                                </Link>\n                            )\n                        ) : (\n                            <div className={styles.item} key={index}>\n                              <div className={styles.icon}>\n                                <Icon name={x.icon} size=\"20\"/>\n                              </div>\n                              <div className={styles.text}>{x.title}</div>\n                              <Theme className={styles.theme}/>\n                            </div>\n                        )\n                    )}\n                  </div>\n                </div>\n            )}\n          </div>\n        </OutsideClickHandler>\n    );\n  }\n  else {\n    return (\n        <OutsideClickHandler onOutsideClick={() => {setWalletVis(false)}}>\n          <div className={cn(styles.user, className)}>\n           <div className={styles.head} onClick={() => onConnect()}>\n              <div className={styles.disconnectedWallet}>\n                Connect Wallet\n              </div>\n            </div>\n          {walletVis && (\n              <div className={styles.body}>\n                <WalletSelector/>\n              </div>\n          )}\n          </div>\n        </OutsideClickHandler>\n    );\n  }\n};\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}